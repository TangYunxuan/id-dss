import{d as I,u as q,r as m,g as T,h as z,i as F,w as H,c as n,a as e,j as y,k as d,e as j,v as g,l as S,F as k,m as _,t as c,n as N,o as i,f as R}from"./index-BIMWRJSL.js";import{u as D,c as E}from"./api-CxRqiZlS.js";const $={class:"animate-fade-in"},G={class:"card p-6 space-y-6"},J={class:"grid sm:grid-cols-2 gap-6"},K=["value"],Q=["value"],W={class:"space-y-3"},X={key:0,class:"bg-surface-50 rounded-lg p-4 text-sm text-surface-500 italic"},Y={class:"mt-2 w-6 text-xs text-surface-500 text-right flex-shrink-0"},Z=["id","onUpdate:modelValue"],ee=["onClick"],te={class:"flex flex-wrap items-center gap-2"},se={key:1,class:"bg-surface-50 border border-surface-200 rounded-lg p-4"},le={key:0,class:"p-4 rounded-lg bg-red-50 border border-red-200 text-red-700 text-sm"},oe={class:"flex justify-end"},ne=["disabled"],ie={key:0,class:"w-5 h-5 animate-spin",fill:"none",viewBox:"0 0 24 24"},ae={key:1},re={key:2,class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},ve=I({__name:"CourseContextView",setup(ue){const O=R(),r=q(),v=m(!1),b=m(""),x=T(()=>r.hasActiveSession&&!!r.sessionId),s=z({course_title:"",level:"",modality:"",constraints:"",learning_objectives:""});function w(l){return(l||"").replace(/^\s*(?:[-*•]|\d+\.)\s+/,"").trim()}function C(l){const t=(l||"").replace(/\r\n/g,`
`).trim();return t?t.split(`
`).map(w).filter(Boolean):[]}function V(l){return(l||[]).map(w).filter(Boolean).join(`
`)}const a=m([]),p=m(!1),f=m("");F(()=>{x.value&&Object.assign(s,r.courseContext),a.value=C(s.learning_objectives||"")}),H(a,l=>{s.learning_objectives=V(l)},{deep:!0});function A(){a.value.push("")}function B(l){a.value.splice(l,1)}function M(){const l=C(f.value);l.length!==0&&(a.value=[...a.value,...l],f.value="",p.value=!1)}const P=[{value:"undergraduate",label:"Undergraduate"},{value:"graduate",label:"Graduate"}],L=[{value:"in-person",label:"In-Person"},{value:"hybrid",label:"Hybrid"},{value:"online",label:"Online"}];async function U(){if(!s.course_title||!s.level||!s.modality){b.value="Please fill in all required fields.";return}v.value=!0,b.value="";try{let l=r.currentSession;x.value&&r.sessionId?l=await D(r.sessionId,{course_title:s.course_title,level:s.level,modality:s.modality,constraints:s.constraints||void 0,learning_objectives:s.learning_objectives||void 0}):l=await E({course_title:s.course_title,level:s.level,modality:s.modality,constraints:s.constraints||void 0,learning_objectives:s.learning_objectives||void 0}),r.setSession(l),r.setCourseContext(s),r.setCurrentPhase("objective-analysis"),O.push("/objective-analysis")}catch(l){console.error("Failed to create session:",l),b.value="Failed to create session. Please try again."}finally{v.value=!1}}return(l,t)=>(i(),n("div",$,[t[18]||(t[18]=e("div",{class:"mb-8"},[e("h1",{class:"text-2xl font-bold text-surface-900 mb-2"},"Course Context"),e("p",{class:"text-surface-600"}," Provide information about your course to help the AI generate relevant suggestions. ")],-1)),e("form",{onSubmit:N(U,["prevent"]),class:"space-y-6"},[e("div",G,[e("div",null,[t[6]||(t[6]=e("label",{for:"course_title",class:"input-label"},[j(" Course Title "),e("span",{class:"text-red-500"},"*")],-1)),d(e("input",{id:"course_title","onUpdate:modelValue":t[0]||(t[0]=o=>s.course_title=o),type:"text",class:"input-field",placeholder:"e.g., Introduction to Machine Learning",required:""},null,512),[[g,s.course_title]])]),e("div",J,[e("div",null,[t[8]||(t[8]=e("label",{for:"level",class:"input-label"},[j(" Education Level "),e("span",{class:"text-red-500"},"*")],-1)),d(e("select",{id:"level","onUpdate:modelValue":t[1]||(t[1]=o=>s.level=o),class:"select-field",required:""},[t[7]||(t[7]=e("option",{value:"",disabled:""},"Select level...",-1)),(i(),n(k,null,_(P,o=>e("option",{key:o.value,value:o.value},c(o.label),9,K)),64))],512),[[S,s.level]])]),e("div",null,[t[10]||(t[10]=e("label",{for:"modality",class:"input-label"},[j(" Delivery Modality "),e("span",{class:"text-red-500"},"*")],-1)),d(e("select",{id:"modality","onUpdate:modelValue":t[2]||(t[2]=o=>s.modality=o),class:"select-field",required:""},[t[9]||(t[9]=e("option",{value:"",disabled:""},"Select modality...",-1)),(i(),n(k,null,_(L,o=>e("option",{key:o.value,value:o.value},c(o.label),9,Q)),64))],512),[[S,s.modality]])])]),e("div",null,[t[12]||(t[12]=e("label",{for:"learning_objectives",class:"input-label"}," Learning Objectives ",-1)),e("div",W,[a.value.length===0?(i(),n("div",X," No objectives yet. Add one below, or paste multiple at once. ")):y("",!0),(i(!0),n(k,null,_(a.value,(o,u)=>(i(),n("div",{key:u,class:"flex items-start gap-2"},[e("div",Y,c(u+1)+".",1),d(e("input",{id:u===0?"learning_objectives":void 0,"onUpdate:modelValue":h=>a.value[u]=h,type:"text",class:"input-field",placeholder:"e.g., Students will be able to explain..."},null,8,Z),[[g,a.value[u]]]),e("button",{type:"button",class:"btn-ghost text-sm px-3 py-2 flex-shrink-0",onClick:h=>B(u),title:"Remove"}," Remove ",8,ee)]))),128)),e("div",te,[e("button",{type:"button",class:"btn-secondary",onClick:A}," + Add objective "),e("button",{type:"button",class:"btn-ghost",onClick:t[3]||(t[3]=o=>p.value=!p.value)},c(p.value?"Hide paste box":"Paste multiple"),1)]),p.value?(i(),n("div",se,[t[11]||(t[11]=e("div",{class:"text-xs text-surface-500 mb-2"},"Paste objectives (one per line)",-1)),d(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=o=>f.value=o),class:"w-full bg-white rounded-lg p-3 text-sm text-surface-700 border border-surface-200 focus:outline-none focus:ring-2 focus:ring-brand-200 focus:border-brand-300",rows:"4",placeholder:`• Objective 1
• Objective 2
• Objective 3`},null,512),[[g,f.value]]),e("div",{class:"flex justify-end mt-3"},[e("button",{type:"button",class:"btn-primary",onClick:M}," Add to list ")])])):y("",!0)]),t[13]||(t[13]=e("p",{class:"mt-1.5 text-sm text-surface-500"}," These will be analyzed by the AI in the next step. ",-1))]),e("div",null,[t[14]||(t[14]=e("label",{for:"constraints",class:"input-label"}," Constraints & Requirements ",-1)),d(e("textarea",{id:"constraints","onUpdate:modelValue":t[5]||(t[5]=o=>s.constraints=o),class:"textarea-field",rows:"3",placeholder:"e.g., 15-week semester, max 30 students, limited lab access..."},null,512),[[g,s.constraints]]),t[15]||(t[15]=e("p",{class:"mt-1.5 text-sm text-surface-500"}," Any limitations or specific requirements for the course design. ",-1))])]),b.value?(i(),n("div",le,c(b.value),1)):y("",!0),e("div",oe,[e("button",{type:"submit",class:"btn-primary",disabled:v.value},[v.value?(i(),n("svg",ie,[...t[16]||(t[16]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(i(),n("span",ae,c(x.value?"Save & Continue to Objective Analysis":"Continue to Objective Analysis"),1)),v.value?y("",!0):(i(),n("svg",re,[...t[17]||(t[17]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7l5 5m0 0l-5 5m5-5H6"},null,-1)])]))],8,ne)])],32)]))}});export{ve as default};
