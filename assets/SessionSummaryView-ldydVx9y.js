import{d as E,u as D,r as m,i as I,f as A,g as B,c as o,b as N,a as e,j as v,t,F as y,l as _,p as M,e as h,o as a,s as z}from"./index-Dch-8Eue.js";import{e as V,d as L,f as P}from"./api-C0GNVXHU.js";const F={class:"animate-fade-in"},R={class:"space-y-6 mb-8"},T={class:"card p-6"},H={class:"grid sm:grid-cols-2 gap-6"},O={class:"font-medium text-surface-900"},q={class:"font-mono text-sm text-surface-700"},U={class:"font-medium text-surface-900 capitalize"},W={class:"font-medium text-surface-900 capitalize"},$={class:"card p-6"},G={key:0,class:"bg-surface-50 rounded-lg p-4 text-sm text-surface-700 whitespace-pre-wrap"},J={key:1,class:"bg-surface-50 rounded-lg p-4 text-sm text-surface-500 italic"},K={key:0,class:"card p-6"},Q={class:"bg-surface-50 rounded-lg p-4 text-sm text-surface-700 whitespace-pre-wrap"},X={class:"card p-6"},Y={key:0,class:"flex items-center justify-center py-8"},Z={key:1,class:"space-y-4"},ee={class:"grid grid-cols-2 sm:grid-cols-4 gap-4"},se={class:"bg-surface-50 rounded-lg p-4 text-center"},te={class:"text-2xl font-bold text-surface-900"},oe={class:"bg-surface-50 rounded-lg p-4 text-center"},ae={class:"text-2xl font-bold text-brand-600"},ie={class:"bg-surface-50 rounded-lg p-4 text-center"},ne={class:"text-2xl font-bold text-emerald-600"},re={class:"bg-surface-50 rounded-lg p-4 text-center"},le={class:"text-2xl font-bold text-surface-900"},de={key:0},ce={class:"flex flex-wrap gap-2"},ue={key:1},xe={class:"space-y-3"},me={class:"flex-1 min-w-0"},ve={class:"flex items-center gap-2"},fe={class:"font-medium text-surface-900 capitalize"},pe={class:"badge badge-brand text-xs"},be={class:"badge badge-neutral text-xs"},ge={class:"text-xs text-surface-500 mt-1"},ye={key:2,class:"bg-surface-50 rounded-lg p-4 text-sm text-surface-500 italic text-center"},_e={key:0,class:"mb-6 p-4 rounded-lg bg-red-50 border border-red-200 text-red-700 text-sm"},he={class:"card p-6 bg-gradient-to-br from-brand-50 to-brand-100/50 border-brand-200 mb-8"},ke={class:"flex items-center justify-between"},we={class:"flex items-center gap-2"},Ce=["disabled"],Se={key:0,class:"w-5 h-5 animate-spin",fill:"none",viewBox:"0 0 24 24"},je={key:1,class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Ee=["disabled"],De={class:"flex justify-between"},Ne=E({__name:"SessionSummaryView",setup(Ie){const f=A(),i=D(),l=m(!1),p=m(!1),r=m(null),x=m("");I(async()=>{if(!i.hasActiveSession){f.push("/new-session");return}await k()});async function k(){if(i.sessionId){p.value=!0;try{r.value=await V(i.sessionId)}catch(n){console.error("Failed to load session data:",n)}finally{p.value=!1}}}const d=B(()=>{var n;return{course:i.courseContext.course_title,level:i.courseContext.level,modality:i.courseContext.modality,constraints:i.courseContext.constraints,objectives:i.courseContext.learning_objectives,sessionId:i.sessionId,createdAt:(n=i.currentSession)==null?void 0:n.created_at}});async function w(){if(i.sessionId){l.value=!0,x.value="";try{await L(i.sessionId)}catch(n){console.error("Export failed:",n),x.value="Export failed. Please try again."}finally{l.value=!1}}}async function C(){if(i.sessionId){l.value=!0,x.value="";try{await P(i.sessionId)}catch(n){console.error("Export failed:",n),x.value="Export failed. Please try again."}finally{l.value=!1}}}function S(){i.resetSession(),f.push("/new-session")}function j(n){return new Date(n).toLocaleString()}return(n,s)=>{var b,g;return a(),o("div",F,[s[22]||(s[22]=N('<div class="mb-8"><div class="flex items-center gap-3 mb-2"><div class="w-10 h-10 rounded-xl bg-emerald-100 text-emerald-600 flex items-center justify-center"><svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div><h1 class="text-2xl font-bold text-surface-900">Session Summary</h1></div><p class="text-surface-600"> Review your design session and export the complete data. </p></div>',1)),e("div",R,[e("div",T,[s[5]||(s[5]=e("h2",{class:"text-sm font-semibold text-surface-500 uppercase tracking-wider mb-4"},"Course Information",-1)),e("div",H,[e("div",null,[s[1]||(s[1]=e("div",{class:"text-xs text-surface-500 mb-1"},"Course Title",-1)),e("div",O,t(d.value.course||"Not specified"),1)]),e("div",null,[s[2]||(s[2]=e("div",{class:"text-xs text-surface-500 mb-1"},"Session ID",-1)),e("div",q,"#"+t(d.value.sessionId),1)]),e("div",null,[s[3]||(s[3]=e("div",{class:"text-xs text-surface-500 mb-1"},"Education Level",-1)),e("div",U,t(((b=d.value.level)==null?void 0:b.replace("-"," "))||"Not specified"),1)]),e("div",null,[s[4]||(s[4]=e("div",{class:"text-xs text-surface-500 mb-1"},"Delivery Modality",-1)),e("div",W,t(((g=d.value.modality)==null?void 0:g.replace("-"," "))||"Not specified"),1)])])]),e("div",$,[s[6]||(s[6]=e("h2",{class:"text-sm font-semibold text-surface-500 uppercase tracking-wider mb-4"},"Learning Objectives",-1)),d.value.objectives?(a(),o("div",G,t(d.value.objectives),1)):(a(),o("div",J," No learning objectives were specified for this session. "))]),d.value.constraints?(a(),o("div",K,[s[7]||(s[7]=e("h2",{class:"text-sm font-semibold text-surface-500 uppercase tracking-wider mb-4"},"Constraints & Requirements",-1)),e("div",Q,t(d.value.constraints),1)])):v("",!0),e("div",X,[s[16]||(s[16]=e("h2",{class:"text-sm font-semibold text-surface-500 uppercase tracking-wider mb-4"},"Design Activity Summary",-1)),p.value?(a(),o("div",Y,[...s[8]||(s[8]=[e("svg",{class:"w-6 h-6 animate-spin text-brand-600",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):r.value?(a(),o("div",Z,[e("div",ee,[e("div",se,[e("div",te,t(r.value.summary.total_steps),1),s[9]||(s[9]=e("div",{class:"text-xs text-surface-500"},"Design Steps",-1))]),e("div",oe,[e("div",ae,t(r.value.summary.total_recommendations),1),s[10]||(s[10]=e("div",{class:"text-xs text-surface-500"},"AI Recommendations",-1))]),e("div",ie,[e("div",ne,t(r.value.summary.total_actions),1),s[11]||(s[11]=e("div",{class:"text-xs text-surface-500"},"User Actions",-1))]),e("div",re,[e("div",le,t(Object.keys(r.value.summary.actions_by_type).length),1),s[12]||(s[12]=e("div",{class:"text-xs text-surface-500"},"Action Types",-1))])]),Object.keys(r.value.summary.actions_by_type).length>0?(a(),o("div",de,[s[13]||(s[13]=e("div",{class:"text-sm font-medium text-surface-700 mb-2"},"Actions by Type",-1)),e("div",ce,[(a(!0),o(y,null,_(r.value.summary.actions_by_type,(c,u)=>(a(),o("span",{key:u,class:z(["px-3 py-1 rounded-full text-sm",{"bg-emerald-100 text-emerald-700":u==="accept","bg-red-100 text-red-700":u==="reject","bg-amber-100 text-amber-700":u==="edit","bg-blue-100 text-blue-700":u==="regenerate","bg-surface-100 text-surface-700":!["accept","reject","edit","regenerate"].includes(u)}])},t(u)+": "+t(c),3))),128))])])):v("",!0),r.value.design_steps.length>0?(a(),o("div",ue,[s[15]||(s[15]=e("div",{class:"text-sm font-medium text-surface-700 mb-3"},"Design Steps",-1)),e("div",xe,[(a(!0),o(y,null,_(r.value.design_steps,c=>(a(),o("div",{key:c.id,class:"flex items-start gap-3 p-3 bg-surface-50 rounded-lg"},[s[14]||(s[14]=e("div",{class:"w-8 h-8 rounded-full bg-brand-100 text-brand-600 flex items-center justify-center flex-shrink-0"},[e("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)),e("div",me,[e("div",ve,[e("span",fe,t(c.phase.replace("-"," ")),1),e("span",pe,t(c.recommendations.length)+" recommendations",1),e("span",be,t(c.user_actions.length)+" actions",1)]),e("div",ge,t(j(c.created_at)),1)])]))),128))])])):v("",!0)])):(a(),o("div",ye," No design activity recorded yet. Complete the design steps to see a summary here. "))])]),x.value?(a(),o("div",_e,t(x.value),1)):v("",!0),e("div",he,[e("div",ke,[s[19]||(s[19]=e("div",null,[e("h2",{class:"font-semibold text-brand-900 mb-1"},"Export Session Data"),e("p",{class:"text-sm text-brand-700"}," Download your complete design session including all steps, AI recommendations, and your decisions. ")],-1)),e("div",we,[e("button",{onClick:w,disabled:l.value,class:"btn-primary"},[l.value?(a(),o("svg",Se,[...s[17]||(s[17]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(a(),o("svg",je,[...s[18]||(s[18]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"},null,-1)])])),e("span",null,t(l.value?"Exporting...":"Export Word"),1)],8,Ce),e("button",{onClick:C,disabled:l.value,class:"btn-secondary"}," Export PDF ",8,Ee)])])]),e("div",De,[e("button",{onClick:s[0]||(s[0]=c=>M(f).push("/activity-suggestion")),class:"btn-secondary"},[...s[20]||(s[20]=[e("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 17l-5-5m0 0l5-5m-5 5h12"})],-1),h(" Back to Activities ",-1)])]),e("button",{onClick:S,class:"btn-primary"},[...s[21]||(s[21]=[e("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),h(" Start New Session ",-1)])])])])}}});export{Ne as default};
